!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.storex=e()}}(function(){return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,s=n;a=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=s,r=!0}},u=e("events"),c=e("./util"),l=r(c),f=l["default"].wrapName("listen"),p=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return i(t,e),s(t,[{key:"emit",value:function(e,n,r){return n?(a(Object.getPrototypeOf(t.prototype),"emit",this).call(this,f,n),void a(Object.getPrototypeOf(t.prototype),"emit",this).call(this,e,n)):(a(Object.getPrototypeOf(t.prototype),"emit",this).call(this,f,null,r),void a(Object.getPrototypeOf(t.prototype),"emit",this).call(this,e,null,r))}},{key:"listen",value:function(e,t){"function"==typeof e&&(t=e,e=void 0),this.on(e||f,t)}}]),t}(u.EventEmitter);n["default"]=p,t.exports=n["default"]},{"./util":4,events:5}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return new s["default"](e)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./store"),s=r(i);n["default"]=o,t.exports=n["default"]},{"./store":3}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,s=n;a=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=s,r=!0}},u=e("./emitter"),c=r(u),l=e("./util"),f=r(l),p=function(e){function t(e){var n=this;if(o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),"object"!=typeof e)throw new Error("the store needs an object with methods");var r=Object.keys(e).filter(function(t){return"function"==typeof e[t]});if(0===r.length)throw new Error("the store needs at least 1 method");r.forEach(function(t){n[t]=n._method.bind(n,t),n[f["default"].wrapName(t)]=e[t]}),this._pendingPromises=0,this._init()}return i(t,e),s(t,[{key:"listen",value:function(e,n){a(Object.getPrototypeOf(t.prototype),"listen",this).call(this,e,n),"string"!=typeof e&&(n=e,e=void 0,0===this._pendingPromises&&n(null,this.state))}},{key:"_init",value:function(){var e="init",t=this[f["default"].wrapName(e)]||f["default"].noop,n=t();this._handleResult(e,n)}},{key:"_method",value:function(e){for(var t,n={state:this.state},r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];var s=(t=this[f["default"].wrapName(e)]).call.apply(t,[n].concat(o));return this._handleResult(e,s),s}},{key:"_handleResult",value:function(e,t){var n=this;return f["default"].isPromise(t)?(this._pendingPromises+=1,void t.then(function(t){n._pendingPromises+=-1,n._state=f["default"].clone(t),n.emit(e,null,n.state)},function(t){n._pendingPromises+=-1,n.emit(e,t)})):(this._state=f["default"].clone(t||[]),void(0===this._pendingPromises&&this.emit(e,null,this.state)))}},{key:"state",get:function(){return f["default"].clone(this._state)}}]),t}(c["default"]);n["default"]=p,t.exports=n["default"]},{"./emitter":1,"./util":4}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return"$"+e+"$"}function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function s(){}Object.defineProperty(n,"__esModule",{value:!0});var a=e("lodash/lang/cloneDeep"),u=r(a);n["default"]={noop:s,clone:u["default"],wrapName:o,isPromise:i},t.exports=n["default"]},{"lodash/lang/cloneDeep":28}],5:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),u=1;r>u;u++)i[u-1]=arguments[u];n.apply(this,i)}else if(s(n)){for(r=arguments.length,i=new Array(r-1),u=1;r>u;u++)i[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=i;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],6:[function(e,t,n){function r(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=r},{}],7:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=r},{}],8:[function(e,t,n){function r(e,t){return null==t?e:o(t,i(t),e)}var o=e("./baseCopy"),i=e("../object/keys");t.exports=r},{"../object/keys":34,"./baseCopy":10}],9:[function(e,t,n){function r(e,t,n,h,y,b,d){var j;if(n&&(j=y?n(e,h,y):n(e)),void 0!==j)return j;if(!p(e))return e;var m=f(e);if(m){if(j=u(e),!t)return o(e,j)}else{var O=S.call(e),w=O==g;if(O!=_&&O!=v&&(!w||y))return T[O]?c(e,O,t):y?e:{};if(j=l(w?{}:e),!t)return s(j,e)}b||(b=[]),d||(d=[]);for(var x=b.length;x--;)if(b[x]==e)return d[x];return b.push(e),d.push(j),(m?i:a)(e,function(o,i){j[i]=r(o,t,n,i,e,b,d)}),j}var o=e("./arrayCopy"),i=e("./arrayEach"),s=e("./baseAssign"),a=e("./baseForOwn"),u=e("./initCloneArray"),c=e("./initCloneByTag"),l=e("./initCloneObject"),f=e("../lang/isArray"),p=e("../lang/isObject"),v="[object Arguments]",h="[object Array]",y="[object Boolean]",b="[object Date]",d="[object Error]",g="[object Function]",j="[object Map]",m="[object Number]",_="[object Object]",O="[object RegExp]",w="[object Set]",x="[object String]",A="[object WeakMap]",L="[object ArrayBuffer]",k="[object Float32Array]",P="[object Float64Array]",E="[object Int8Array]",C="[object Int16Array]",F="[object Int32Array]",N="[object Uint8Array]",I="[object Uint8ClampedArray]",M="[object Uint16Array]",U="[object Uint32Array]",T={};T[v]=T[h]=T[L]=T[y]=T[b]=T[k]=T[P]=T[E]=T[C]=T[F]=T[m]=T[_]=T[O]=T[x]=T[N]=T[I]=T[M]=T[U]=!0,T[d]=T[g]=T[j]=T[w]=T[A]=!1;var B=Object.prototype,S=B.toString;t.exports=r},{"../lang/isArray":30,"../lang/isObject":33,"./arrayCopy":6,"./arrayEach":7,"./baseAssign":8,"./baseForOwn":12,"./initCloneArray":19,"./initCloneByTag":20,"./initCloneObject":21}],10:[function(e,t,n){function r(e,t,n){n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r];n[i]=e[i]}return n}t.exports=r},{}],11:[function(e,t,n){var r=e("./createBaseFor"),o=r();t.exports=o},{"./createBaseFor":16}],12:[function(e,t,n){function r(e,t){return o(e,t,i)}var o=e("./baseFor"),i=e("../object/keys");t.exports=r},{"../object/keys":34,"./baseFor":11}],13:[function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],14:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return o;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,s){return e.call(t,n,r,o,i,s)}}return function(){return e.apply(t,arguments)}}var o=e("../utility/identity");t.exports=r},{"../utility/identity":36}],15:[function(e,t,n){(function(e){function n(e){var t=new r(e.byteLength),n=new o(t);return n.set(new o(e)),t}var r=e.ArrayBuffer,o=e.Uint8Array;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){function r(e){return function(t,n,r){for(var i=o(t),s=r(t),a=s.length,u=e?a:-1;e?u--:++u<a;){var c=s[u];if(n(i[c],c,i)===!1)break}return t}}var o=e("./toObject");t.exports=r},{"./toObject":27}],17:[function(e,t,n){var r=e("./baseProperty"),o=r("length");t.exports=o},{"./baseProperty":13}],18:[function(e,t,n){function r(e,t){var n=null==e?void 0:e[t];return o(n)?n:void 0}var o=e("../lang/isNative");t.exports=r},{"../lang/isNative":32}],19:[function(e,t,n){function r(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var o=Object.prototype,i=o.hasOwnProperty;t.exports=r},{}],20:[function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case l:return o(e);case i:case s:return new r(+e);case f:case p:case v:case h:case y:case b:case d:case g:case j:var _=e.buffer;return new r(n?o(_):_,e.byteOffset,e.length);case a:case c:return new r(e);case u:var O=new r(e.source,m.exec(e));O.lastIndex=e.lastIndex}return O}var o=e("./bufferClone"),i="[object Boolean]",s="[object Date]",a="[object Number]",u="[object RegExp]",c="[object String]",l="[object ArrayBuffer]",f="[object Float32Array]",p="[object Float64Array]",v="[object Int8Array]",h="[object Int16Array]",y="[object Int32Array]",b="[object Uint8Array]",d="[object Uint8ClampedArray]",g="[object Uint16Array]",j="[object Uint32Array]",m=/\w*$/;t.exports=r},{"./bufferClone":15}],21:[function(e,t,n){function r(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=r},{}],22:[function(e,t,n){function r(e){return null!=e&&i(o(e))}var o=e("./getLength"),i=e("./isLength");t.exports=r},{"./getLength":17,"./isLength":24}],23:[function(e,t,n){function r(e,t){return e="number"==typeof e||o.test(e)?+e:-1,t=null==t?i:t,e>-1&&e%1==0&&t>e}var o=/^\d+$/,i=9007199254740991;t.exports=r},{}],24:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&o>=e}var o=9007199254740991;t.exports=r},{}],25:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],26:[function(e,t,n){function r(e){for(var t=u(e),n=t.length,r=n&&e.length,c=!!r&&a(r)&&(i(e)||o(e)),f=-1,p=[];++f<n;){var v=t[f];(c&&s(v,r)||l.call(e,v))&&p.push(v)}return p}var o=e("../lang/isArguments"),i=e("../lang/isArray"),s=e("./isIndex"),a=e("./isLength"),u=e("../object/keysIn"),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},{"../lang/isArguments":29,"../lang/isArray":30,"../object/keysIn":35,"./isIndex":23,"./isLength":24}],27:[function(e,t,n){function r(e){return o(e)?e:Object(e)}var o=e("../lang/isObject");t.exports=r},{"../lang/isObject":33}],28:[function(e,t,n){function r(e,t,n){return"function"==typeof t?o(e,!0,i(t,n,1)):o(e,!0)}var o=e("../internal/baseClone"),i=e("../internal/bindCallback");t.exports=r},{"../internal/baseClone":9,"../internal/bindCallback":14}],29:[function(e,t,n){function r(e){return i(e)&&o(e)&&a.call(e,"callee")&&!u.call(e,"callee")}var o=e("../internal/isArrayLike"),i=e("../internal/isObjectLike"),s=Object.prototype,a=s.hasOwnProperty,u=s.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":22,"../internal/isObjectLike":25}],30:[function(e,t,n){var r=e("../internal/getNative"),o=e("../internal/isLength"),i=e("../internal/isObjectLike"),s="[object Array]",a=Object.prototype,u=a.toString,c=r(Array,"isArray"),l=c||function(e){return i(e)&&o(e.length)&&u.call(e)==s};t.exports=l},{"../internal/getNative":18,"../internal/isLength":24,"../internal/isObjectLike":25}],31:[function(e,t,n){function r(e){return o(e)&&a.call(e)==i}var o=e("./isObject"),i="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},{"./isObject":33}],32:[function(e,t,n){function r(e){return null==e?!1:o(e)?l.test(u.call(e)):i(e)&&s.test(e)}var o=e("./isFunction"),i=e("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isObjectLike":25,"./isFunction":31}],33:[function(e,t,n){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],34:[function(e,t,n){var r=e("../internal/getNative"),o=e("../internal/isArrayLike"),i=e("../lang/isObject"),s=e("../internal/shimKeys"),a=r(Object,"keys"),u=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&o(e)?s(e):i(e)?a(e):[]}:s;t.exports=u},{"../internal/getNative":18,"../internal/isArrayLike":22,"../internal/shimKeys":26,"../lang/isObject":33}],35:[function(e,t,n){function r(e){if(null==e)return[];u(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(i(e)||o(e))&&t||0;for(var n=e.constructor,r=-1,c="function"==typeof n&&n.prototype===e,f=Array(t),p=t>0;++r<t;)f[r]=r+"";for(var v in e)p&&s(v,t)||"constructor"==v&&(c||!l.call(e,v))||f.push(v);return f}var o=e("../lang/isArguments"),i=e("../lang/isArray"),s=e("../internal/isIndex"),a=e("../internal/isLength"),u=e("../lang/isObject"),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},{"../internal/isIndex":23,"../internal/isLength":24,"../lang/isArguments":29,"../lang/isArray":30,"../lang/isObject":33}],36:[function(e,t,n){function r(e){return e}t.exports=r},{}]},{},[2])(2)});
